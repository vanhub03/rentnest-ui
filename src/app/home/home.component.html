<main>
  <section class="hero-section">
    <div class="container">
      <h1 class="hero-title reveal">Tìm Chỗ Ở Tuyệt Vời Của Bạn</h1>
      <p class="hero-subtitle reveal delay-200">
        Hệ thống tìm kiếm và quản lý phòng trọ thông minh, minh bạch và nhanh chóng nhất hiện nay.
      </p>

      <form class="search-box reveal delay-400" (ngSubmit)="onSearch()">
        <div class="flex-1 text-left">
          <label
            class="form-label"
            style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem"
            >Khu vực</label
          >
          <select
            class="form-control"
            name="district"
            [(ngModel)]="searchForm.district"
            style="border: none; background-color: var(--bg-alt); padding: 0.5rem"
          >
            <option value="">Tất cả quận/huyện</option>
            <option value="caugiay">Cầu Giấy, Hà Nội</option>
            <option value="thanhxuan">Thanh Xuân, Hà Nội</option>
            <option value="q1">Quận 1, TP.HCM</option>
          </select>
        </div>
        <div class="flex-1 text-left">
          <label
            class="form-label"
            style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem"
            >Khoảng giá</label
          >
          <select
            class="form-control"
            name="price"
            [(ngModel)]="searchForm.price"
            style="border: none; background-color: var(--bg-alt); padding: 0.5rem"
          >
            <option value="">Mọi mức giá</option>
            <option value="under3">Dưới 3 triệu</option>
            <option value="3to5">3 - 5 triệu</option>
            <option value="over5">Trên 5 triệu</option>
          </select>
        </div>
        <div class="d-flex align-items-end">
          <button
            type="submit"
            class="btn btn-primary btn-lg btn-block"
            style="height: calc(100% - 1.25rem)"
          >
            <i class="fas fa-search"></i> Tìm kiếm
          </button>
        </div>
      </form>
    </div>
  </section>

  <section class="py-5">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4 reveal">
        <h2 class="font-bold m-0">Phòng Mới Đăng Tuyển</h2>
        <a routerLink="/rooms" class="btn btn-outline btn-sm"
          >Xem tất cả <i class="fas fa-arrow-right"></i
        ></a>
      </div>

      <div class="d-grid grid-cols-4 gap-4">
        @for (room of latestRooms; track room.id) {
          <div class="card room-card reveal">
            <div class="badge-overlay">
              <span
                class="badge"
                [ngClass]="room.status === 'AVAILABLE' ? 'badge-success' : 'badge-warning'"
              >
                {{ room.status === 'AVAILABLE' ? 'Còn trống' : 'Sắp trống' }}
              </span>
            </div>
            <div class="card-img-container">
              <img
                [src]="
                  room.imageUrl ||
                  'https://images.unsplash.com/photo-1555541170-1361cddf01d0?w=600&auto=format&fit=crop&q=60'
                "
                [alt]="room.title"
                class="card-img"
              />
            </div>
            <div class="card-body p-3">
              <div class="text-muted mb-1" style="font-size: 0.8rem">
                <i class="fas fa-map-marker-alt"></i> {{ room.district }}, {{ room.address }}
              </div>
              <h4
                class="font-semibold mb-2"
                style="font-size: 1.1rem; cursor: pointer"
                [routerLink]="['/room', room.id]"
              >
                {{ room.title }}
              </h4>
              <div class="text-primary font-bold mb-3" style="font-size: 1.25rem">
                {{ room.price | currency: 'VND' : '' }}đ
                <span class="text-muted" style="font-size: 0.8rem; font-weight: normal"
                  >/tháng</span
                >
              </div>
              <div
                class="d-flex justify-content-between text-muted"
                style="
                  font-size: 0.85rem;
                  border-top: 1px solid var(--border-color);
                  padding-top: 0.75rem;
                "
              >
                <span><i class="fas fa-vector-square"></i> {{ room.area }}m²</span>
                <span><i class="fas fa-bed"></i> {{ room.bedCount }} Giường</span>
                <span><i class="fas fa-bath"></i> {{ room.bathCount }} WC</span>
              </div>
            </div>
          </div>
        } @empty {
          <div class="col-span-4 text-center py-5 text-muted">Chưa có phòng trọ nào được đăng.</div>
        }
      </div>
    </div>
  </section>

  <section class="py-5" style="background-color: rgba(15, 82, 186, 0.05)">
    <div class="container text-center reveal">
      <h2 class="font-bold mb-3">Bạn Là Chủ Nhà Trọ?</h2>
      <p class="text-muted mb-4 max-w-2xl mx-auto">
        Trải nghiệm hệ thống quản lý bất động sản chuyên nghiệp với tính năng chốt điện nước, xuất
        hóa đơn tự động và đánh giá người thuê uy tín.
      </p>
      <a routerLink="/admin/dashboard" class="btn btn-secondary btn-lg animate-float"
        >Dùng Thử Admin Portal</a
      >
    </div>
  </section>
</main>

<div class="floating-chat-container">
  <a href="tel:19001234" class="float-btn btn-call" title="Gọi Hotline ngay">
    <i class="fas fa-phone-alt"></i>
    <div class="pulse-ring"></div>
  </a>
  <a href="https://zalo.me/0988111222" target="_blank" class="float-btn btn-zalo" title="Chat Zalo">
    <i class="fas fa-comment-dots"></i>
    <div class="pulse-ring" style="animation-delay: 0.5s"></div>
  </a>
  <a href="https://messenger.com" target="_blank" class="float-btn btn-messenger" title="Messenger">
    <i class="fab fa-facebook-messenger"></i>
    <div class="pulse-ring" style="animation-delay: 1s"></div>
  </a>
</div>
